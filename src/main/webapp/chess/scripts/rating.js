$(function() {

	var datasets = {
		"Carlsen" : {
			label : "Carlsen",
			data : [ [ 2001, 2064 ], [ 2002, 2127 ], [ 2003, 2279 ],
					[ 2004, 2484 ], [ 2005, 2553 ], [ 2006, 2625 ],
					[ 2007, 2690 ], [ 2008, 2733 ], [ 2009, 2776 ],
					[ 2010, 2810 ], [ 2011, 2814 ], [ 2012, 2835 ],
					[ 2013, 2861 ], [ 2014, 2872 ], [ 2015, 2863 ] ]
		},
		"Caruana" : {
			label : "Caruana",
			data : [ [ 2002, 2032 ], [ 2003, 2134 ], [ 2004, 2122 ],
					[ 2005, 2219 ], [ 2006, 2409 ], [ 2007, 2492 ],
					[ 2008, 2598 ], [ 2009, 2646 ], [ 2010, 2675 ],
					[ 2011, 2721 ], [ 2012, 2736 ], [ 2013, 2781 ],
					[ 2014, 2782 ], [ 2015, 2836 ] ]
		},
		"Aronian" : {
			label : "Aronian",
			data : [ [ 2000, 2587 ], [ 2001, 2522 ], [ 2002, 2584 ],
					[ 2003, 2610 ], [ 2004, 2648 ], [ 2005, 2684 ],
					[ 2006, 2752 ], [ 2007, 2744 ], [ 2008, 2739 ],
					[ 2009, 2750 ], [ 2010, 2781 ], [ 2011, 2805 ],
					[ 2012, 2805 ], [ 2013, 2802 ], [ 2014, 2812 ],
					[ 2015, 2793 ] ]
		},
		"Grischuk" : {
			label : "Grischuk",
			data : [ [ 2000, 2581 ], [ 2001, 2663 ], [ 2002, 2671 ],
					[ 2003, 2712 ], [ 2004, 2719 ], [ 2005, 2710 ],
					[ 2006, 2717 ], [ 2007, 2717 ], [ 2008, 2711 ],
					[ 2009, 2733 ], [ 2010, 2736 ], [ 2011, 2773 ],
					[ 2012, 2761 ], [ 2013, 2764 ], [ 2014, 2777 ],
					[ 2015, 2789 ] ]
		},
		"Topalov" : {
			label : "Topalov",
			data : [ [ 2000, 2702 ], [ 2001, 2718 ], [ 2002, 2739 ],
					[ 2003, 2743 ], [ 2004, 2735 ], [ 2005, 2757 ],
					[ 2006, 2801 ], [ 2007, 2783 ], [ 2008, 2780 ],
					[ 2009, 2796 ], [ 2010, 2805 ], [ 2011, 2775 ],
					[ 2012, 2770 ], [ 2013, 2771 ], [ 2014, 2785 ],
					[ 2015, 2789 ] ]
		},
		"Anand" : {
			label : "Anand",
			data : [ [ 2000, 2769 ], [ 2001, 2790 ], [ 2002, 2757 ],
					[ 2003, 2753 ], [ 2004, 2766 ], [ 2005, 2786 ],
					[ 2006, 2792 ], [ 2007, 2779 ], [ 2008, 2799 ],
					[ 2009, 2791 ], [ 2010, 2790 ], [ 2011, 2810 ],
					[ 2012, 2799 ], [ 2013, 2772 ], [ 2014, 2773 ],
					[ 2015, 2785 ] ]
		},
		"Karjakin" : {
			label : "Karjakin",
			data : [ [ 2000, 2206 ], [ 2001, 2269 ], [ 2002, 2460 ],
					[ 2003, 2547 ], [ 2004, 2566 ], [ 2005, 2599 ],
					[ 2006, 2660 ], [ 2007, 2678 ], [ 2008, 2732 ],
					[ 2009, 2706 ], [ 2010, 2720 ], [ 2011, 2776 ],
					[ 2012, 2769 ], [ 2013, 2780 ], [ 2014, 2759 ],
					[ 2015, 2777 ] ]
		},
		"Nakamura" : {
			label : "Nakamura",
			data : [ [ 2000, 2261 ], [ 2001, 2364 ], [ 2002, 2430 ],
					[ 2003, 2520 ], [ 2004, 2571 ], [ 2005, 2613 ],
					[ 2006, 2644 ], [ 2007, 2651 ], [ 2008, 2670 ],
					[ 2009, 2699 ], [ 2010, 2708 ], [ 2011, 2751 ],
					[ 2012, 2759 ], [ 2013, 2769 ], [ 2014, 2789 ],
					[ 2015, 2764 ] ]
		},
		"Vachier-Lagrave" : {
			label : "Vachier-Lagrave",
			data : [ [ 2000, 2186 ], [ 2001, 2198 ], [ 2002, 2278 ],
					[ 2003, 2348 ], [ 2004, 2427 ], [ 2005, 2488 ],
					[ 2006, 2542 ], [ 2007, 2573 ], [ 2008, 2637 ],
					[ 2009, 2696 ], [ 2010, 2730 ], [ 2011, 2715 ],
					[ 2012, 2699 ], [ 2013, 2713 ], [ 2014, 2745 ],
					[ 2015, 2763 ] ]
		},
		"Mamedyarov" : {
			label : "Mamedyarov",
			data : [ [ 2000, 2201 ], [ 2001, 2479 ], [ 2002, 2522 ],
					[ 2003, 2596 ], [ 2004, 2646 ], [ 2005, 2657 ],
					[ 2006, 2709 ], [ 2007, 2754 ], [ 2008, 2760 ],
					[ 2009, 2724 ], [ 2010, 2741 ], [ 2011, 2772 ],
					[ 2012, 2747 ], [ 2013, 2766 ], [ 2014, 2757 ],
					[ 2015, 2760 ] ]
		},
		"Kramnik" : {
			label : "Kramnik",
			data : [ [ 2000, 2758 ], [ 2001, 2799 ], [ 2002, 2811 ],
					[ 2003, 2809 ], [ 2004, 2777 ], [ 2005, 2754 ],
					[ 2006, 2741 ], [ 2007, 2766 ], [ 2008, 2799 ],
					[ 2009, 2759 ], [ 2010, 2788 ], [ 2011, 2784 ],
					[ 2012, 2801 ], [ 2013, 2810 ], [ 2014, 2787 ],
					[ 2015, 2760 ] ]
		},
		"Giri" : {
			label : "Giri",
			data : [ [ 2005, 2112 ], [ 2006, 2114 ], [ 2007, 2192 ],
					[ 2008, 2344 ], [ 2009, 2469 ], [ 2010, 2588 ],
					[ 2011, 2686 ], [ 2012, 2714 ], [ 2013, 2726 ],
					[ 2014, 2734 ], [ 2015, 2760 ] ]
		},
		"Dominguez" : {
			label : "Dominguez",
			data : [ [ 2009, 2717 ], [ 2010, 2712 ], [ 2011, 2716 ],
					[ 2012, 2730 ], [ 2013, 2723 ], [ 2014, 2754 ],
					[ 2015, 2755 ] ]
		},
		"So" : {
			label : "So, Wesley",
			data : [ [ 2005, 2165 ], [ 2006, 2216 ], [ 2007, 2451 ],
					[ 2008, 2526 ], [ 2009, 2627 ], [ 2010, 2656 ],
					[ 2011, 2673 ], [ 2012, 2653 ], [ 2013, 2682 ],
					[ 2014, 2719 ], [ 2015, 2755 ] ]
		},
		"Adams" : {
			label : "Adams",
			data : [ [ 2000, 2715 ], [ 2001, 2746 ], [ 2002, 2742 ],
					[ 2003, 2734 ], [ 2004, 2720 ], [ 2005, 2741 ],
					[ 2006, 2707 ], [ 2007, 2735 ], [ 2008, 2726 ],
					[ 2009, 2712 ], [ 2010, 2694 ], [ 2011, 2723 ],
					[ 2012, 2724 ], [ 2013, 2725 ], [ 2014, 2754 ],
					[ 2015, 2752 ] ]
		},
		"Gelfand" : {
			label : "Gelfand",
			data : [ [ 2000, 2692 ], [ 2001, 2712 ], [ 2002, 2708 ],
					[ 2003, 2700 ], [ 2004, 2709 ], [ 2005, 2696 ],
					[ 2006, 2723 ], [ 2007, 2733 ], [ 2008, 2737 ],
					[ 2009, 2733 ], [ 2010, 2761 ], [ 2011, 2733 ],
					[ 2012, 2739 ], [ 2013, 2740 ], [ 2014, 2777 ],
					[ 2015, 2748 ] ]
		},
		"Jakovenko" : {
			label : "Jakovenko",
			data : [ [ 2000, 2443 ], [ 2001, 2523 ], [ 2002, 2553 ],
					[ 2003, 2561 ], [ 2004, 2581 ], [ 2005, 2596 ],
					[ 2006, 2662 ], [ 2007, 2691 ], [ 2008, 2720 ],
					[ 2009, 2760 ], [ 2010, 2730 ], [ 2011, 2718 ],
					[ 2012, 2729 ], [ 2013, 2734 ], [ 2014, 2727 ],
					[ 2015, 2747 ] ]
		},
		"Vitiugov" : {
			label : "Vitiugov",
			data : [ [ 2000, 2162 ], [ 2001, 2355 ], [ 2002, 2408 ],
					[ 2003, 2435 ], [ 2004, 2474 ], [ 2005, 2478 ],
					[ 2006, 2573 ], [ 2007, 2604 ], [ 2008, 2609 ],
					[ 2009, 2687 ], [ 2010, 2692 ], [ 2011, 2709 ],
					[ 2012, 2726 ], [ 2013, 2694 ], [ 2014, 2737 ],
					[ 2015, 2742 ] ]
		},
		"Wojtaszek" : {
			label : "Wojtaszek",
			data : [ [ 2000, 2217 ], [ 2001, 2252 ], [ 2002, 2427 ],
					[ 2003, 2469 ], [ 2004, 2480 ], [ 2005, 2553 ],
					[ 2006, 2605 ], [ 2007, 2637 ], [ 2008, 2614 ],
					[ 2009, 2608 ], [ 2010, 2639 ], [ 2011, 2726 ],
					[ 2012, 2706 ], [ 2013, 2723 ], [ 2014, 2711 ],
					[ 2015, 2736 ] ]
		},
		"Leko" : {
			label : "Leko",
			data : [ [ 2000, 2725 ], [ 2001, 2745 ], [ 2002, 2713 ],
					[ 2003, 2736 ], [ 2004, 2722 ], [ 2005, 2749 ],
					[ 2006, 2740 ], [ 2007, 2749 ], [ 2008, 2753 ],
					[ 2009, 2751 ], [ 2010, 2739 ], [ 2011, 2717 ],
					[ 2012, 2720 ], [ 2013, 2735 ], [ 2014, 2730 ],
					[ 2015, 2734 ] ]
		},
		"Svidler" : {
			label : "Svidler",
			data : [ [ 2000, 2672 ], [ 2001, 2695 ], [ 2002, 2688 ],
					[ 2003, 2693 ], [ 2004, 2747 ], [ 2005, 2735 ],
					[ 2006, 2765 ], [ 2007, 2728 ], [ 2008, 2763 ],
					[ 2009, 2723 ], [ 2010, 2744 ], [ 2011, 2730 ],
					[ 2012, 2749 ], [ 2013, 2747 ], [ 2014, 2758 ],
					[ 2015, 2732 ] ]
		},
		"Morozevich" : {
			label : "Morozevich",
			data : [ [ 2000, 2748 ], [ 2001, 2745 ], [ 2002, 2742 ],
					[ 2003, 2678 ], [ 2004, 2732 ], [ 2005, 2741 ],
					[ 2006, 2721 ], [ 2007, 2741 ], [ 2008, 2765 ],
					[ 2009, 2771 ], [ 2010, 2732 ], [ 2011, 2700 ],
					[ 2012, 2763 ], [ 2013, 2758 ], [ 2014, 2722 ],
					[ 2015, 2731 ] ]
		},
		"Ding" : {
			label : "Ding, Liren",
			data : [ [ 2004, 2230 ], [ 2005, 2270 ], [ 2006, 2289 ],
					[ 2007, 2289 ], [ 2008, 2395 ], [ 2009, 2446 ],
					[ 2010, 2565 ], [ 2011, 2628 ], [ 2012, 2660 ],
					[ 2013, 2709 ], [ 2014, 2717 ], [ 2015, 2730 ] ]
		},
		"Ivanchuk" : {
			label : "Ivanchuk",
			data : [ [ 2000, 2708 ], [ 2001, 2717 ], [ 2002, 2717 ],
					[ 2003, 2699 ], [ 2004, 2716 ], [ 2005, 2711 ],
					[ 2006, 2729 ], [ 2007, 2750 ], [ 2008, 2751 ],
					[ 2009, 2779 ], [ 2010, 2749 ], [ 2011, 2764 ],
					[ 2012, 2766 ], [ 2013, 2758 ], [ 2014, 2739 ],
					[ 2015, 2726 ] ]
		},
		"Bacrot" : {
			label : "Bacrot",
			data : [ [ 2000, 2594 ], [ 2001, 2618 ], [ 2002, 2649 ],
					[ 2003, 2671 ], [ 2004, 2664 ], [ 2005, 2715 ],
					[ 2006, 2717 ], [ 2007, 2705 ], [ 2008, 2700 ],
					[ 2009, 2722 ], [ 2010, 2713 ], [ 2011, 2723 ],
					[ 2012, 2704 ], [ 2013, 2703 ], [ 2014, 2738 ],
					[ 2015, 2724 ] ]
		},
		"Andreikin" : {
			label : "Andreikin",
			data : [ [ 2001, 2217 ], [ 2002, 2378 ], [ 2003, 2342 ],
					[ 2004, 2412 ], [ 2005, 2472 ], [ 2006, 2464 ],
					[ 2007, 2509 ], [ 2008, 2573 ], [ 2009, 2614 ],
					[ 2010, 2635 ], [ 2011, 2689 ], [ 2012, 2688 ],
					[ 2013, 2727 ], [ 2014, 2709 ], [ 2015, 2722 ] ]
		},
		"Fressinet" : {
			label : "Fressinet",
			data : [ [ 2000, 2501 ], [ 2001, 2581 ], [ 2002, 2591 ],
					[ 2003, 2593 ], [ 2004, 2636 ], [ 2005, 2638 ],
					[ 2006, 2625 ], [ 2007, 2646 ], [ 2008, 2656 ],
					[ 2009, 2666 ], [ 2010, 2670 ], [ 2011, 2707 ],
					[ 2012, 2693 ], [ 2013, 2706 ], [ 2014, 2709 ],
					[ 2015, 2721 ] ]
		},
		"Rapport" : {
			label : "Rapport",
			data : [ [ 2006, 2005 ], [ 2007, 1998 ], [ 2008, 2178 ],
					[ 2009, 2371 ], [ 2010, 2444 ], [ 2011, 2531 ],
					[ 2012, 2543 ], [ 2013, 2621 ], [ 2014, 2691 ],
					[ 2015, 2721 ] ]
		},
		"Eljanov" : {
			label : "Eljanov",
			data : [ [ 2000, 2464 ], [ 2001, 2556 ], [ 2002, 2540 ],
					[ 2003, 2571 ], [ 2004, 2596 ], [ 2005, 2643 ],
					[ 2006, 2655 ], [ 2007, 2675 ], [ 2008, 2692 ],
					[ 2009, 2693 ], [ 2010, 2736 ], [ 2011, 2724 ],
					[ 2012, 2690 ], [ 2013, 2678 ], [ 2014, 2733 ],
					[ 2015, 2719 ] ]
		},
		"Naiditsch" : {
			label : "Naiditsch",
			data : [ [ 2000, 2442 ], [ 2001, 2484 ], [ 2002, 2532 ],
					[ 2003, 2585 ], [ 2004, 2576 ], [ 2005, 2623 ],
					[ 2006, 2657 ], [ 2007, 2663 ], [ 2008, 2638 ],
					[ 2009, 2693 ], [ 2010, 2687 ], [ 2011, 2685 ],
					[ 2012, 2702 ], [ 2013, 2708 ], [ 2014, 2718 ],
					[ 2015, 2719 ] ]
		},
		"Harikrishna" : {
			label : "Harikrishna",
			data : [ [ 2000, 2430 ], [ 2001, 2514 ], [ 2002, 2525 ],
					[ 2003, 2539 ], [ 2004, 2582 ], [ 2005, 2632 ],
					[ 2006, 2673 ], [ 2007, 2673 ], [ 2008, 2664 ],
					[ 2009, 2673 ], [ 2010, 2672 ], [ 2011, 2667 ],
					[ 2012, 2665 ], [ 2013, 2698 ], [ 2014, 2706 ],
					[ 2015, 2717 ] ]
		},
		"Ponomariov" : {
			label : "Ponomariov",
			data : [ [ 2000, 2621 ], [ 2001, 2677 ], [ 2002, 2727 ],
					[ 2003, 2734 ], [ 2004, 2722 ], [ 2005, 2700 ],
					[ 2006, 2723 ], [ 2007, 2723 ], [ 2008, 2719 ],
					[ 2009, 2726 ], [ 2010, 2737 ], [ 2011, 2744 ],
					[ 2012, 2727 ], [ 2013, 2733 ], [ 2014, 2721 ],
					[ 2015, 2717 ] ]
		},
		"Radjabov" : {
			label : "Radjabov",
			data : [ [ 2000, 2459 ], [ 2001, 2483 ], [ 2002, 2599 ],
					[ 2003, 2624 ], [ 2004, 2656 ], [ 2005, 2667 ],
					[ 2006, 2700 ], [ 2007, 2729 ], [ 2008, 2735 ],
					[ 2009, 2761 ], [ 2010, 2733 ], [ 2011, 2744 ],
					[ 2012, 2773 ], [ 2013, 2793 ], [ 2014, 2713 ],
					[ 2015, 2717 ] ]
		},
		"Vallejo" : {
			label : "Vallejo",
			data : [ [ 2000, 2528 ], [ 2001, 2550 ], [ 2002, 2629 ],
					[ 2003, 2629 ], [ 2004, 2663 ], [ 2005, 2686 ],
					[ 2006, 2650 ], [ 2007, 2679 ], [ 2008, 2675 ],
					[ 2009, 2702 ], [ 2010, 2705 ], [ 2011, 2698 ],
					[ 2012, 2705 ], [ 2013, 2694 ], [ 2014, 2707 ],
					[ 2015, 2716 ] ]
		},
	};

	// insert checkboxes
	var choiceContainer = $("#choices");

	choiceContainer
			.append("<input type='checkbox' id='selectall' checked='checked' /> Select All");

	$.each(datasets, function(key, val) {
		choiceContainer
				.append("<br/><input class='checkbox1' type='checkbox' name='"
						+ key + "' checked='checked' id='id" + key
						+ "'></input>" + "<label for='id" + key + "'>"
						+ val.label + "</label>");
	});

	choiceContainer.find("input").click(plotAccordingToChoices);

	function plotAccordingToChoices() {

		var data = [];

		choiceContainer.find("input:checked").each(function() {
			var key = $(this).attr("name");
			if (key && datasets[key]) {
				data.push(datasets[key]);
			}
		});

		$.plot("#placeholder", data, {
			xaxis : {
				max : 2020,
				tickDecimals : 0
			}
		});
	}

	plotAccordingToChoices();

	$('#selectall').click(function(event) { // on click
		if (this.checked) { // check select status
			$('.checkbox1').each(function() { // loop through each checkbox
				this.checked = true; // select all checkboxes with class
				// "checkbox1"
			});
		} else {
			$('.checkbox1').each(function() { // loop through each checkbox
				this.checked = false; // deselect all checkboxes with class
				// "checkbox1"
			});
		}
		plotAccordingToChoices();
	});

});
